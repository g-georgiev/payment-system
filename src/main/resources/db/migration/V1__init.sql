create table transaction (amount numeric(38,2), created_on timestamp(6) not null, merchant_id bigint not null, reference_id uuid, uuid uuid not null, transaction_type varchar(31) not null, customer_email varchar(255) not null, customer_phone varchar(255) not null, status varchar(255) not null check (status in ('APPROVED','REVERSED','REFUNDED','ERROR')), primary key (uuid));
create table user_credentials (is_active boolean, total_transaction_sum numeric(38,2), id bigint generated by default as identity, role varchar(31) not null, description varchar(255), email varchar(255) unique, name varchar(255), password varchar(255) not null, status varchar(255) check (status in ('ACTIVE','INACTIVE')), username varchar(255) not null unique, primary key (id));
alter table if exists transaction add constraint FK5jr4skqgjwbh6x8lscsclby6h foreign key (merchant_id) references user_credentials;
alter table if exists transaction add constraint FKrhyk34gouivxi0s43mcji7ew5 foreign key (reference_id) references transaction;
